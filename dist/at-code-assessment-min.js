!function(s){s.module("at.assessment",["ngMaterial","at.assessment.editor","at.assessment.submission"])}(angular),function(s){"use strict";function t(s,t,n,e){t.load(s.assessmentId).success(function(){s.assessment=t.current,n.resetCurrent(),s.Submissions=n}).error(function(){e.show({template:"<md-toast>Error !</md-toast>"})}),s.reset=n.resetCurrent,s.submit=n.submitCurrent}function n(){return{restrict:"EA",scope:{assessmentId:"@",aceConfig:"="},templateUrl:"app/assessment/assessment.tpl.html",controller:"AssessmentController",transclude:!0}}function e(){function t(s){var t={};return t.current={},t.load=function(e){return s.get(n.baseUrl+e).success(function(s){t.current=s})},t}var n={baseUrl:"localhost/"};this.config=function(t){s.extend(n,t)},t.$inject=["$http"],this.$get=t}t.$inject=["$scope","atAssessment","atSubmission","$mdToast"],s.module("at.assessment.editor",["ui.ace","at.assessment.submission"]).directive("atAssessmentEditor",n).controller("AssessmentController",t).provider("atAssessment",e)}(angular),function(s){function t(){function t(t,e,o){var i={current:{assessment:{},compilationUnits:[],finished:!1,result:{}}},r={};return s.extend(r,i),r.resetCurrent=function(){r.current.assessment=t.current,s.forEach(t.current.compilationUnitsToSubmit,function(s){var t={name:s.name,code:s.startCode};r.current.compilationUnits.push(t)})},r.submitCurrent=function(){return r.submit(t.current,r.current.compilationUnits)},r.submit=function(s,t){o.hide(),o.show({templateUrl:"app/submission/submissionProgressDialog.tpl.html",clickOutsideToClose:!1,escapeToClose:!1}),r.current={assessment:s,compilationUnits:t,finished:!1,result:{}};var i={compilationUnits:t};return e.post(n.baseUrl+s.id,i).success(function(s){r.current.result=s}).error(function(s){console.log(s)}).finally(function(){o.hide(),r.current.finished=!0})},r.hasResult=function(){return r.current.assessment===t.current&&r.current.finished&&void 0!==r.current.result&&void 0!==r.current.result.pass},r}var n={baseUrl:"localhost/"};this.config=function(t){s.extend(n,t)},t.$inject=["atAssessment","$http","$mdDialog"],this.$get=t}s.module("at.assessment.submission",[]).provider("atSubmission",t)}(angular),angular.module("at.assessment").run(["$templateCache",function(s){s.put("app/assessment/assessment.tpl.html",'<md-toolbar class="fixed-toolbar">\n    <div class="md-toolbar-tools">\n        {{ assessment.title }}\n        <span flex></span>\n        <md-button ng-if="false">\n            Help\n        </md-button>\n        <md-button ng-click="reset()">\n            Reset\n        </md-button>\n        <md-button class="md-button-colored" ng-click="submit()">\n            Submit code\n        </md-button>\n    </div>\n</md-toolbar>\n<md-content class="md-content-padding" style="padding-top:66px;">\n\n    <p>\n        {{ assessment.instructions }}\n    </p>\n\n    <section ng-repeat="compilationUnit in Submissions.current.compilationUnits">\n        <section ui-ace="AceConfig" ng-model="compilationUnit.code" style="height:500px;width:100%;"></section>\n    </section>\n\n    <section class="result" ng-transclude ng-show="Submissions.current.result">\n\n    </section>\n    <!--<submission-result></submission-result>-->\n\n</md-content>'),s.put("app/submission/submissionProgressDialog.tpl.html",'<md-dialog class="dialog-result">\n    <md-toolbar class="md-theme-light">\n        <div class="md-toolbar-tools" layout="horizontal" layout-align="center">\n            <h3>\n                Work in progress....\n            </h3>\n        </div>\n    </md-toolbar>\n    <div class="dialog-content">\n        <md-progress-linear mode="indeterminate"></md-progress-linear>\n    </div>\n</md-dialog>')}]);