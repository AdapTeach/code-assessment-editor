!function(n){n.module("at.assessment",["ngMaterial","at.assessment.editor","at.assessment.submission"])}(angular),function(n){"use strict";function s(n,s,t,e,o){n.AceConfig=o,s.load(n.assessmentId).success(function(){n.assessment=s.current,t.resetCurrent(),n.Submissions=t,o.setLanguage(s.current.language)}).error(function(){e.show({template:"<md-toast>Error !</md-toast>"})}),n.reset=t.resetCurrent,n.submit=t.submitCurrent}function t(){return{restrict:"EA",scope:{assessmentId:"@",aceConfig:"="},templateUrl:"app/assessment/assessment.tpl.html",controller:"AssessmentController",transclude:!0}}function e(){function s(n){var s={};return s.current={},s.load=function(e){return n.get(t.baseUrl+e).success(function(n){s.current=n})},s}var t={baseUrl:"localhost/"};this.config=function(s){n.extend(t,s)},s.$inject=["$http"],this.$get=s}function o(){var n={config:{}},s={java:{mode:"java",theme:"eclipse",require:["ace/ext/language_tools"],advanced:{enableSnippets:!0,enableBasicAutocompletion:!0,enableLiveAutocompletion:!0}}};return n.setLanguage=function(t){n.config=s[t]},n}s.$inject=["$scope","atAssessment","atSubmission","$mdToast","AceConfig"],n.module("at.assessment.editor",["ui.ace","at.assessment.submission"]).factory("AceConfig",o).directive("atAssessmentEditor",t).controller("AssessmentController",s).provider("atAssessment",e)}(angular),function(n){function s(){function s(s,e,o){var i={current:{assessment:{},compilationUnits:[],finished:!1,result:{}}},r={};return n.extend(r,i),r.resetCurrent=function(){r.current.assessment=s.current,n.forEach(s.current.compilationUnitsToSubmit,function(n){var s={name:n.name,code:n.startCode};r.current.compilationUnits.push(s)})},r.submitCurrent=function(){return r.submit(s.current,r.current.compilationUnits)},r.submit=function(n,s){o.hide(),o.show({templateUrl:"app/submission/submissionProgressDialog.tpl.html",clickOutsideToClose:!1,escapeToClose:!1}),r.current={assessment:n,compilationUnits:s,finished:!1,result:{}};var i={compilationUnits:s};return e.post(t.baseUrl+n.id,i).success(function(n){r.current.result=n}).error(function(n){console.log(n)}).finally(function(){o.hide(),r.current.finished=!0})},r.hasResult=function(){return r.current.assessment===s.current&&r.current.finished&&void 0!==r.current.result&&void 0!==r.current.result.pass},r}var t={baseUrl:"localhost/"};this.config=function(s){n.extend(t,s)},s.$inject=["atAssessment","$http","$mdDialog"],this.$get=s}n.module("at.assessment.submission",[]).provider("atSubmission",s)}(angular),angular.module("at.assessment").run(["$templateCache",function(n){n.put("app/assessment/assessment.tpl.html",'<md-toolbar class="fixed-toolbar">\n    <div class="md-toolbar-tools">\n        {{ assessment.title }}\n        <span flex></span>\n        <md-button ng-if="false">\n            Help\n        </md-button>\n        <md-button ng-click="reset()">\n            Reset\n        </md-button>\n        <md-button class="md-button-colored" ng-click="submit()">\n            Submit code\n        </md-button>\n    </div>\n</md-toolbar>\n<md-content class="md-content-padding" style="padding-top:66px;">\n\n    <p>\n        {{ assessment.instructions }}\n    </p>\n\n    <section ng-repeat="compilationUnit in Submissions.current.compilationUnits">\n        <section\n                ng-model="compilationUnit.code"\n                ui-ace="AceConfig.config"\n                style="height:500px;width:100%;font-size: 16px"></section>\n    </section>\n\n    <section class="result" ng-transclude ng-show="Submissions.current.result">\n\n    </section>\n    <!--<submission-result></submission-result>-->\n\n</md-content>'),n.put("app/submission/submissionProgressDialog.tpl.html",'<md-dialog class="dialog-result">\n    <md-toolbar class="md-theme-light">\n        <div class="md-toolbar-tools" layout="horizontal" layout-align="center">\n            <h3>\n                Work in progress....\n            </h3>\n        </div>\n    </md-toolbar>\n    <div class="dialog-content">\n        <md-progress-linear mode="indeterminate"></md-progress-linear>\n    </div>\n</md-dialog>')}]);